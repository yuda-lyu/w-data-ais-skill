---
name: fetch-goodinfo
description: æŠ“å– Goodinfo å°ç£è‚¡å¸‚è³‡è¨Šç¶²ä¸‰å¤§æ³•äººè²·è³£è¶…è³‡æ–™ã€‚æ”¯æ´è²·è¶…/è³£è¶…æ’è¡Œï¼Œå›å‚³çµæ§‹åŒ– JSONã€‚é©ç”¨æ–¼å°è‚¡èª¿ç ”ã€æ³•äººå‹•å‘è¿½è¹¤ã€ç±Œç¢¼åˆ†æã€‚
---

# Goodinfo è³‡æ–™æŠ“å–

å¾ Goodinfo å°ç£è‚¡å¸‚è³‡è¨Šç¶²æŠ“å–ä¸‰å¤§æ³•äººè²·è³£è¶…è³‡æ–™ã€‚

## ç¶²ç«™è³‡è¨Š

| é …ç›® | èªªæ˜ |
|------|------|
| ç¶²å€ | https://goodinfo.tw |
| è³‡æ–™é¡å‹ | ä¸‰å¤§æ³•äººè²·è³£è¶…ã€ç±Œç¢¼è³‡æ–™ |
| æŠ“å–æ–¹å¼ | browser evaluate |
| æ›´æ–°é »ç‡ | æ¯æ—¥ 16:30-17:00 æ›´æ–°å‰ä¸€äº¤æ˜“æ—¥è³‡æ–™ |

## âš ï¸ Anti-bot / ç©ºè³‡æ–™è™•ç†ï¼ˆå¿…è¦ï¼‰

Goodinfo æœ‰ JavaScript-based anti-bot é˜²è­·ï¼Œæœƒåœ¨é¦–æ¬¡è¨ªå•æ™‚è¨­å®š cookie ä¸¦é‡å®šå‘ã€‚
æ­¤å¤–ï¼Œéƒ¨åˆ†èˆŠç¶²å€åœ¨æœªå¸¶è¶³å¤ æ¢ä»¶æ™‚æœƒå› **ã€ŒæŸ¥ç„¡è³‡æ–™!!ã€**ï¼ˆå±¬æ–¼ã€ŒæŸ¥è©¢æ¢ä»¶ä¸æˆç«‹/é é¢è·¯å¾‘è®Šæ›´ã€ï¼Œä¸æ˜¯ç­‰å¾…å°±æœƒå¥½ï¼‰ã€‚

**å¿…é ˆ**æŒ‰ä»¥ä¸‹æ­¥é©Ÿè™•ç†ï¼š

### æŠ“å–æ­¥é©Ÿ

```
æ­¥é©Ÿ 1ï¼šé–‹å•Ÿé é¢ï¼ˆè§¸ç™¼ anti-botï¼‰
  browser open â†’
  - è²·è¶…æ¦œï¼šhttps://goodinfo.tw/tw/StockList.asp?MARKET_CAT=%E7%86%B1%E9%96%80%E6%8E%92%E8%A1%8C&INDUSTRY_CAT=%E4%B8%89%E5%A4%A7%E6%B3%95%E4%BA%BA%E7%B4%AF%E8%A8%88%E8%B2%B7%E8%B6%85%E5%BC%B5%E6%95%B8+%E2%80%93+%E7%95%B6%E6%97%A5%40%40%E4%B8%89%E5%A4%A7%E6%B3%95%E4%BA%BA%E7%B4%AF%E8%A8%88%E8%B2%B7%E8%B6%85%40%40%E4%B8%89%E5%A4%A7%E6%B3%95%E4%BA%BA%E8%B2%B7%E8%B6%85%E5%BC%B5%E6%95%B8+%E2%80%93+%E7%95%B6%E6%97%A5
  - è³£è¶…æ¦œï¼šhttps://goodinfo.tw/tw/StockList.asp?MARKET_CAT=%E7%86%B1%E9%96%80%E6%8E%92%E8%A1%8C&INDUSTRY_CAT=%E4%B8%89%E5%A4%A7%E6%B3%95%E4%BA%BA%E7%B4%AF%E8%A8%88%E8%B3%A3%E8%B6%85%E5%BC%B5%E6%95%B8+%E2%80%93+%E7%95%B6%E6%97%A5%40%40%E4%B8%89%E5%A4%A7%E6%B3%95%E4%BA%BA%E7%B4%AF%E8%A8%88%E8%B3%A3%E8%B6%85%40%40%E4%B8%89%E5%A4%A7%E6%B3%95%E4%BA%BA%E8%B3%A3%E8%B6%85%E5%BC%B5%E6%95%B8+%E2%80%93+%E7%95%B6%E6%97%A5

æ­¥é©Ÿ 2ï¼šç­‰å¾…é‡å®šå‘å®Œæˆï¼ˆé—œéµï¼ï¼‰
  ç­‰å¾… 3-5 ç§’ï¼Œè®“ç€è¦½å™¨å®Œæˆ JavaScript åŸ·è¡Œå’Œ cookie è¨­å®š
  browser snapshot â†’ ç¢ºèªé é¢å·²è¼‰å…¥å®Œæˆï¼ˆæª¢æŸ¥æ˜¯å¦æœ‰è¡¨æ ¼å…§å®¹ï¼‰

æ­¥é©Ÿ 3ï¼šè‹¥ä»åœ¨é‡å®šå‘é é¢ï¼Œæ‰‹å‹•å°èˆª
  å¦‚æœ snapshot é¡¯ç¤ºåªæœ‰ JavaScript é‡å®šå‘ä»£ç¢¼ï¼ˆå¦‚ setCookieã€window.location.replaceï¼‰ï¼ŒåŸ·è¡Œï¼š
  browser navigate â†’ åŒä¸€ç¶²å€ï¼ˆæ­¤æ™‚ cookie å·²è¨­å®šï¼Œæœƒæ­£å¸¸è¼‰å…¥ï¼‰
  å†æ¬¡ç­‰å¾… 2-3 ç§’

æ­¥é©Ÿ 4ï¼šæŠ“å–è³‡æ–™
  browser act evaluate â†’ åŸ·è¡Œä¸‹æ–¹ JavaScript
```

### åˆ¤æ–·é‡å®šå‘é é¢

å¦‚æœ snapshot å…§å®¹åŒ…å«ä»¥ä¸‹ç‰¹å¾µï¼Œè¡¨ç¤ºä»åœ¨é‡å®šå‘é é¢ï¼š
- `setCookie('CLIENT_KEY'`
- `window.location.replace`
- é é¢å¹¾ä¹æ²’æœ‰å…¶ä»–å…§å®¹

### æŠ“å–è…³æœ¬ï¼ˆå»ºè­°æµç¨‹/åˆ¤æ–·åŸå‰‡ï¼‰

> æ ¸å¿ƒåˆ¤æ–·ï¼š**ä¸€å®šè¦æŠ“åˆ° `#divStockList` ä¸”åˆ—æ•¸è¶³å¤ **ã€‚
> - `document.querySelectorAll('#divStockList tr').length >= 20` æ‰ç®—æˆåŠŸï¼ˆé¿å…æ‹¿åˆ°ç©ºé /å°è½‰é /æŸ¥ç„¡è³‡æ–™é ï¼‰ã€‚
> - è‹¥ `main` å‡ºç¾ã€ŒæŸ¥ç„¡è³‡æ–™!!ã€ï¼šä»£è¡¨**è©²ç¶²å€/æ¢ä»¶æœ¬èº«ç„¡è³‡æ–™**ï¼Œä¸æ˜¯å–®ç´”ç­‰æ›´ä¹…å°±æœƒå¥½ï¼›æ‡‰æ”¹ç”¨ã€Œç†±é–€æ’è¡Œã€çš„è²·è¶…/è³£è¶…æ¦œå–® URLã€‚

```javascript
(() => {
  const msg = document.querySelector('main')?.innerText?.trim() || '';
  const rows = [...document.querySelectorAll('#divStockList tr')];
  return {
    msg: msg.slice(0, 120),
    rowCount: rows.length,
    top10: rows.slice(2, 12).map(r => [...r.querySelectorAll('td')].map(c => c.innerText.trim()))
  };
})();
```

### çµæ§‹åŒ–æŠ“å–ï¼ˆTop 10ï¼‰

> æ³¨æ„ï¼šGoodinfo æ¬„ä½å¶çˆ¾æœƒèª¿æ•´ï¼Œå»ºè­°ç”¨ã€Œæ¬„ä½åç¨± + å‹•æ…‹ç´¢å¼•ã€æ–¹å¼è§£æã€‚
> è‹¥ä½ åªè¦ Top 10ï¼ˆè²·è¶…/è³£è¶…ï¼‰ï¼Œå¯å…ˆç›´æ¥ç”¨å›ºå®šæ¬„ä½åºæŠ“å–ï¼Œä¸¦åœ¨è§£æå¤±æ•—æ™‚è¨˜éŒ„ `parse` errorã€‚

```javascript
// ä»¥è¡¨æ ¼æ¬„ä½é †åºæŠ½å–ï¼ˆTop 10ï¼‰
[...document.querySelectorAll('#divStockList tr')]
  .slice(2, 12)
  .map(r => {
    const cells = [...r.querySelectorAll('td')].map(c => c.innerText.trim());
    return {
      code: cells[0],
      name: cells[1],
      price: cells[2],
      change: cells[3],
      volume: cells[4],
      foreignBuy: cells[5],
      investBuy: cells[6],
      dealerBuy: cells[7],
      totalBuy: cells[8]
    };
  })
```

## å¸¸ç”¨é é¢ï¼ˆâœ… å·²é©—è­‰å¯æ­£å¸¸å‡ºè¡¨æ ¼ï¼‰

> 2026-02-06 å¯¦æ¸¬ï¼šåŸæœ¬ä½¿ç”¨çš„ã€Œæ™ºæ…§é¸è‚¡/ä¸‰å¤§æ³•äººæŒè‚¡ç±Œç¢¼@è²·è³£è¶…å½™ç¸½ã€åœ¨æœªå¸¶æ›´å¤šæ¢ä»¶æ™‚æœƒç›´æ¥å› **ã€ŒæŸ¥ç„¡è³‡æ–™!!ã€**ã€‚
> å› æ­¤æœ¬æŠ€èƒ½æ”¹æ¡ Goodinfo ç«™å…§ã€Œç†±é–€æ’è¡Œã€çš„æ³•äººè²·è³£æ¦œå–®é ï¼Œèƒ½ç©©å®šå–å¾— `#divStockList` è¡¨æ ¼ã€‚

| é é¢ | ç¶²å€ |
|------|------|
| ä¸‰å¤§æ³•äººç´¯è¨ˆè²·è¶…å¼µæ•¸ï¼ˆç•¶æ—¥æ’åï¼‰ | `StockList.asp?MARKET_CAT=ç†±é–€æ’è¡Œ&INDUSTRY_CAT=ä¸‰å¤§æ³•äººç´¯è¨ˆè²·è¶…å¼µæ•¸ â€“ ç•¶æ—¥@@ä¸‰å¤§æ³•äººç´¯è¨ˆè²·è¶…@@ä¸‰å¤§æ³•äººè²·è¶…å¼µæ•¸ â€“ ç•¶æ—¥` |
| ä¸‰å¤§æ³•äººç´¯è¨ˆè³£è¶…å¼µæ•¸ï¼ˆç•¶æ—¥æ’åï¼‰ | `StockList.asp?MARKET_CAT=ç†±é–€æ’è¡Œ&INDUSTRY_CAT=ä¸‰å¤§æ³•äººç´¯è¨ˆè³£è¶…å¼µæ•¸ â€“ ç•¶æ—¥@@ä¸‰å¤§æ³•äººç´¯è¨ˆè³£è¶…@@ä¸‰å¤§æ³•äººè³£è¶…å¼µæ•¸ â€“ ç•¶æ—¥` |
| èè³‡èåˆ¸ | `StockList.asp?MARKET_CAT=æ™ºæ…§é¸è‚¡&INDUSTRY_CAT=èè³‡èåˆ¸%40èè³‡èåˆ¸å¢æ¸›` |
| è‘£ç›£æŒè‚¡ | `StockList.asp?MARKET_CAT=æ™ºæ…§é¸è‚¡&INDUSTRY_CAT=è‘£ç›£æŒè‚¡%40æœ€æ–°è‘£ç›£æŒè‚¡` |

> è¨»ï¼šç¶²å€ä¸­çš„ `â€“` èˆ‡ `@@` ç‚º Goodinfo ç”¨ä¾†æè¿°é¸å–®è·¯å¾‘çš„å­—ä¸²ï¼›å¯¦å‹™ä¸Šå»ºè­°ç”¨ç€è¦½å™¨ç›´æ¥è²¼ä¸Š URLï¼Œæˆ–ç”¨ç¨‹å¼åš URL encodeã€‚

## è¼¸å‡ºæ ¼å¼

```json
{
  "source": "goodinfo",
  "fetchTime": "2026-02-05T08:00:00+08:00",
  "dataDate": "2026-02-04",
  "dataDateROC": "115/02/04",
  "items": [
    {
      "code": "3481",
      "name": "ç¾¤å‰µ",
      "price": "23.0",
      "change": "+6.98%",
      "volume": "385,000",
      "foreignBuy": "50,000",
      "investBuy": "20,000",
      "dealerBuy": "8,960",
      "totalBuy": "78,960"
    }
  ],
  "error": null
}
```

## æ—¥æœŸæ ¼å¼

å ±å‘Šä¸­ä½¿ç”¨æ°‘åœ‹å¹´æ ¼å¼ï¼š
- æ¨™é¡Œï¼š`Goodinfo ä¸‰å¤§æ³•äººè²·è³£è¶…ï¼ˆYYY/MM/DDï¼‰`
- ä¾‹å¦‚ï¼š`Goodinfo ä¸‰å¤§æ³•äººè²·è³£è¶…ï¼ˆ115/02/04ï¼‰`

## éŒ¯èª¤è™•ç†

è‹¥é€£çºŒ 3 æ¬¡å˜—è©¦å¾Œä»ç„¡æ³•è¼‰å…¥ï¼š

```json
{
  "source": "goodinfo",
  "fetchTime": "2026-02-05T08:00:00+08:00",
  "items": [],
  "error": {
    "type": "anti-bot",
    "message": "Failed to bypass anti-bot after 3 attempts",
    "details": "Page still showing JavaScript redirect"
  }
}
```

**é‡è¦**ï¼šGoodinfo å¤±æ•—æ™‚ï¼Œæ¨™è¨˜ã€Œè³‡æ–™æ“·å–å—é™ã€ä¸¦ç¹¼çºŒï¼Œä¸è¦è®“å®ƒé˜»æ“‹æ•´é«”å ±å‘Šç”¢å‡ºã€‚

## ğŸ“ éŒ¯èª¤ç´€éŒ„æ©Ÿåˆ¶ï¼ˆå¿…è¦ï¼‰

åŸ·è¡Œéç¨‹ä¸­é­é‡çš„éŒ¯èª¤é ˆè¨˜éŒ„è‡³èª¿ç”¨æ–¹çš„ `error_log.jsonl`ã€‚

### ç´€éŒ„æ ¼å¼

```json
{
  "timestamp": "2026-02-05T08:15:30+08:00",
  "date": "20260205",
  "source": "goodinfo",
  "phase": "fetch",
  "error": {
    "type": "anti-bot",
    "message": "JavaScript redirect detected",
    "details": "setCookie('CLIENT_KEY', ...); window.location.replace(...)"
  },
  "attempts": [
    {"action": "wait 3s then navigate", "result": "failed", "message": "Still redirect page"},
    {"action": "wait 5s then navigate", "result": "success", "message": "Page loaded"}
  ],
  "resolution": "success",
  "notes": "Goodinfo anti-bot requires 5s wait"
}
```

### éŒ¯èª¤é¡å‹

| type | èªªæ˜ |
|------|------|
| `anti-bot` | Anti-bot é˜²è­·æœªèƒ½ç¹é |
| `timeout` | é é¢è¼‰å…¥é€¾æ™‚ |
| `browser` | ç€è¦½å™¨æ“ä½œå¤±æ•— |
| `parse` | è¡¨æ ¼è§£æå¤±æ•— |
| `empty` | è¡¨æ ¼ç„¡è³‡æ–™ |

### ä½•æ™‚ç´€éŒ„

1. Anti-bot é‡å®šå‘æœªèƒ½ç¹é
2. é é¢è¼‰å…¥å¤±æ•—
3. è¡¨æ ¼å…ƒç´ æ‰¾ä¸åˆ°
4. æ¯æ¬¡é‡è©¦å˜—è©¦ï¼ˆ**ç‰¹åˆ¥é‡è¦**ï¼Œç”¨æ–¼å„ªåŒ– anti-bot ç­–ç•¥ï¼‰

## å¿«é€ŸåŸ·è¡Œ

```
è«‹ä½¿ç”¨ fetch-goodinfo æŠ€èƒ½æŠ“å–ä¸‰å¤§æ³•äººè²·è³£è¶…ï¼š
- è³‡æ–™æ—¥æœŸï¼šå‰ä¸€äº¤æ˜“æ—¥
- è¼¸å‡ºï¼šJSON æ ¼å¼ï¼Œå«è²·è¶… Top 10
- éŒ¯èª¤é ˆè¨˜éŒ„è‡³ error_log.jsonl
```
